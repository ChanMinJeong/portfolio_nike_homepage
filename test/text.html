<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="test.css" />
    <title>테스트 페이지</title>
  </head>
  <body>
    <nav class="main-nav">
      <ul class="menu">
        <li class="menu-item">
          <a href="#">New</a>
          <div class="dropdown">
            <!-- New 하위 메뉴 -->
            <div class="menu-section">
              <h4>New</h4>
              <ul>
                <li><a href="#">Summer Shop</a></li>
                <li><a href="#">신제품 전체</a></li>
                <li><a href="#">베스트셀러</a></li>
              </ul>
            </div>
            <div class="menu-section">
              <h4>Collections</h4>
              <ul>
                <li><a href="#">러닝의 즐거움</a></li>
                <li><a href="#">시티 나이트 런</a></li>
                <li><a href="#">빈티지 스트리트</a></li>
              </ul>
            </div>
          </div>
        </li>
        <li class="menu-item"><a href="#">Men</a></li>
        <li class="menu-item"><a href="#">Women</a></li>
        <!-- 기타 메뉴 항목 -->
      </ul>
    </nav>
  </body>

  <script>
    const mid_1 = document.querySelector(".mid-button1");
    const new_1 = document.querySelector(".new-under-menu");
    const new_undermenu = document.querySelector(".new-headerunder");

    const mid_2 = document.querySelector(".mid-button2");
    const men_1 = document.querySelector(".men-under-menu");
    const men_undermenu = document.querySelector(".men-headerunder");

    const mid_underpage = document.querySelector(".mid-headerunder");
    const list = document.querySelectorAll(".under-menubox");
    /*리스트(예시) = 언더메뉴0, 언더메뉴1... 언더메뉴n*/

    //공통 버튼에 마우스 호버시 어떤 메뉴에 마우스가 호버되었는지에 대한 값을 알아야 함
    //1. 변수를 여러개 생성하고 기능함수를 만든 다음 n개의 조건문을 사용해서 각각 함수를 불러온다
    //2.공통된 변수를 사용하되 각 세부항목에 대한 값만 따로 받아와서 해당 값이 아닐 경우 전부 none과 0으로 바꾼다
    //쿼리셀릭트 올로 받아온 공통 클래스는 배열의 형태로 저장된다 배열의 형태로 저장된 값을 함수로 불러오려면 어디에 호버되었을 때 몇번째 배열을 가져올지를 명시해야한다 공통된 클래스를 여러개의 변수로 나누어놓으면 비효율적, 마우수가 어디에 위치했는지 값을 가져올 수 있으면 효율적 현재로서는 마우스 호버 위치는 각각의 변수로 선언해놓고 안의 내용을 배열로 받은 다음 해당 위치에 맞는 배열을 기능함수에 넣어서 표현하게 만들어야함
    /*

    //중요!!!!! 최상위 부모에 마우스가 올라간 상태여도 창이 닫히면 안댐 이벤트리스너 확인

    mid_1(공통값).addEventListener("mouseenter", () => {
        const target = new_1(변할값).scrollHeight;
        mid_underpage(공통값).style.height = target + "px";
        (변할값).style.height = target + "px";
        (공통값).style.transition = "height 0.3s";
        (변할값).style.transition = "0.3s";
        (변할값).style.transitionDelay = "0.4s";
        list(공통값).forEach((list) => {
          list.style.transition = "0.5s";
          list.style.opacity = "1";
        });
      });
    */

    function mouseHover(targetContent) {
      const target = targetContent.scrollHeight;
      mid_underpage.style.height = target + "px";
      targetContent.style.height = target + "px";
      mid_underpage.style.transition = "height 0.3s";
      list.forEach((item) => {
        item.style.transition = "0.5s";
        item.style.transitionDelay = "0.3s";
        item.style.opacity = "1";
      });
    }

    function mouseOut(targetContent) {
      mid_underpage.style.transition = "none";
      targetContent.style.transition = "none";
      mid_underpage.style.height = "0px";
      targetContent.style.height = "0px";
      list.forEach((item) => {
        item.style.transition = "none";
        item.style.opacity = "0";
      });
    }

    mid_1.addEventListener("mouseenter", () => {
      mouseHover(new_undermenu);
    });
    mid_1.addEventListener("mouseleave", () => {
      mouseOut(new_undermenu);
    });

    mid_2.addEventListener("mouseenter", () => {
      mouseHover(men_undermenu);
    });
    mid_2.addEventListener("mouseleave", () => {
      mouseOut(men_undermenu);
    });
  </script>
</html>

<!--포 잇치는 쿼리셀렉터올로 받아온 노드리스트를 반복문으로 각 요소마다 이벤트를
등록할 수 있는 반복문 mid_1.forEach((mid_1) => { mid-button을 받아온 mid_1에
mid_1(현재요소)를 가지고 mid_1에 마우스 오버, 마우스가 떨어진 상황을 받아옴
-->
